{"id":"1569566779","paper":{"title":{"text":"On Playback Delay in Streaming Communication"},"authors":[{"name":"Gauri Joshi"},{"name":"Yuval Kochman"},{"name":"Gregory W. Wornell"}],"abstr":{"text":"Abstract\u2014We consider the problem of minimizing playback delay in streaming over a packet erasure channel with ﬁxed bandwidth. When packets have to be played in order, the expected delay inherently grows with time. We analyze two cases, namely no feedback and instantaneous feedback. We ﬁnd that in both cases the delay grows logarithmically with the time elapsed since the start of transmission, and we evaluate the growth constant, i.e. the pre-log term, as a function of the transmission bandwidth (relative to the source bandwidth). The growth constant with feedback is strictly better that the one without, but they have the same asymptotic value in the limit of inﬁnite bandwidth."},"body":{"text":"In recent years there has been a widespread proliferation of streaming applications. Unlike traditional ﬁle transfer where only total delay matters, streaming imposes delay constraints on each individual packet.\nIn the presence of lossless instantaneous feedback, the task of transmission is simple: Automatic-repeat-request (ARQ) protocols where the encoder only retransmits lost packets are optimal under any delay metric. However, when feedback is lossy, delayed or completely absent, more efﬁcient erasure- correcting codes are needed. This is because the encoder has inherent uncertainty about the state of the decoder, and it must strike a balance between transmitting new packets and repeating old packets that could have been erased.\nOnly a few papers in literature have analyzed stream- ing codes. Fountain codes [1] are capacity-achieving erasure codes, but they are not suitable for streaming because the decoding delay is proportional to the size of the data. Delay- optimal codes without feedback for adversarial and cyclic burst erasure channels have been extensively explored in [2]. The thesis also proposed universal codes for more general erasure models and analyzes their decoding delay. These codes are based upon sending linear combinations of source packets; indeed, it can be shown that there is no loss in restricting the codes to be linear. This reduces the task of the coding scheme to deciding which packets should be included in every combination. The universal codes proposed in [2] are greedy codes where all packets generated so far are included in a combination. Greedy codes have also been proposed for other applications: in [3] for packet networks, and in [4] for a broadcast scenario with perfect feedback.\nMany streaming applications involve playback. We thus choose to look at the playback delay, which takes this into account and reﬂects the end-to-end performance, rather than the more common decoding delay metric. While in audio and video applications some packets can be dropped without affecting the streaming quality, other applications have strict order constraints on the playback of packets. Our deﬁnition of playback delay is suitable for these applications. This deﬁnition was previously used in [5].\nThe delay performance of greedy codes has not been ana- lyzed and compared to other codes. This work aims to ﬁll that gap, and in particular consider the playback delay. We show that expected playback delay grows proportionally to log n for time index n. Thus, the key parameter in understanding the asymptotic behavior of delay is the proportionality constant, or pre-log. We ﬁnd the optimal constant within a family of schemes that we call time-invariant, and conjecture that this is the optimum for any scheme. This optimum is attained by the conceptually simple coded repetition scheme.\nFurther, we show that even with instantaneous feedback, the playback delay has similar logarithmic growth, although with a smaller pre-log term. We evaluate that constant, and prove that feedback strictly helps reduce the growth of delay, though the gain vanishes in the limit of inﬁnite bandwidth.\nThe paper is organized as follows. We describe the system model in Section II and introduce some preliminary concepts in Section III. In Section IV we analyze streaming without feedback and ﬁnd the optimal pre-log term in the growth of playback delay. In Section V we ﬁnd the pre-log term for streaming with instantaneous feedback and compare it with the no-feedback case. Finally, Section VI concludes the paper and presents future research directions.\nWe consider a point-to-point packet streaming scenario where the source generates one packet p n in every time slot n. The encoder creates b coded packets y n,i = f (p 1 , p 2 ..p n ), for 1 ≤ i ≤ b in each slot, where we assume that b is an integer 1 . The channel is i.i.d erasure for every batch of b packets. With probability ρ, all b coded packets are correctly received, otherwise all are erased. We assume ρb > 1 to ensure that the rate of packet generation is less than channel capacity.\nFig. 1: The time-invariant scheme with b = 3 and pattern a = [0 2 3]. Each number n in the packets transmitted denotes a linear combination of ﬁrst n packets.\nThe receiver plays one packet per slot in exact order. Any packet decoded out of order is buffered until all past packets are received and played. We assume that a packet decoded in slot n is available for playback from slot n + 1 onwards. We choose playback delay P n , the time between the generation and playback of packet p n as the metric of streaming quality.\nFor the given system model, a simple repetition strategy is to transmit packet p n in slots n, n + 1, .. n + b − 1. However, if these b slots are erased, p n is lost permanently and the playback ceases with probability 1. To avoid this, we can transmit a linear combination y n = n j=1 c j p j of packets p 1 to p n , instead of packet p n by itself. The coefﬁcients c j ∈ F q and c j = 0 for all j. For large enough ﬁeld size q, there exist coefﬁcients such that all linear combinations transmitted are independent. Although we consider y n as a linear combination here, it can be a general function f (p 1 , p 2 , ..p n ). Coding offers the advantage that if y n is received when p n has been already decoded, it can be used to decode previous packets. We refer to this scheme as the coded repetition scheme. The coded repetition scheme is a special case of a general class of schemes which can be deﬁned as,\nDeﬁnition 1 (Time-invariant scheme). A time-invariant scheme with pattern a = [a 1 a 2 .. a b ] is the coding strategy where the source transmits combinations y n−a i , for 1 ≤ i ≤ b in slot n, where a i > 0, a i < a j for all i < j, and y n is a linear combination of packets p 1 to p n .\nThe coded repetition scheme corresponds to pattern a i = i − 1 for all 1 ≤ i ≤ b. Fig. 1 shows a typical time- invariant scheme. A number k in the ﬁgure denotes the linear combination y k = k j=1 c j p j , with c j = 0 for all j. The constraint a i < a j for all i < j ensures that each pattern a gives a unique scheme. If for some i, a i = a i+1 , setting a i+1 = a i + 1 gives an equivalent scheme.\nThe receiver is able to decode all packets up to the current time when the number of combinations received exceeds the number of packets generated. After this instant, the decoding of future packets is independent of the past, and the system behaves as if it was reset. This phenomenon gives rise to the following deﬁnition of renewals in packet decoding.\nFig. 2: Illustration of renewals for the coded repetition scheme. Each number n in the packets transmitted denotes a linear combination of all packets p 1 through p n . The cross marks denote erased slots and tick marks denote successful slots.\nDeﬁnition 2 (Renewal). A renewal is deﬁned as the earliest time n when all packets p j , 1 ≤ j ≤ n have been decoded.\nThe time between the (i −1) th and i th renewal is deﬁned as inter-renewal time R i , where we assume that the 0 th renewal occurs at time zero. It is easy to show that inter-renewal times are i.i.d. Note that some packets can be decoded between renewal instants. But at least one packet remains undecoded until a renewal occurs.\nIn the special case of the coded repetition scheme, decoding occurs only at renewal instants. Fig. 2 illustrates renewals of the coded repetition scheme for b = 2. The plot at the bottom of the ﬁgure shows the trajectory of the number of undecoded combinations received with time. A renewal takes place every time the trajectory hits the slope one line. For the coded repetition scheme, the playback delay satisﬁes\nwhere J is smallest integer such that J j=1 R j ≥ n. There is an interruption in playback when the new inter-renewal time is longer than the current maximum.\nThe term information debt introduced in [2] is closely related to renewals. Information debt is the amount of more information needed for successful decoding. A renewal occurs when the information debt becomes non-positive.\nFirst, we consider the case where the encoder has no feedback about channel erasures. We show that for all time- invariant schemes the expected playback delay is asymptoti- cally 1 / λ ·log n where we refer to λ as the growth constant. The\ncoded repetition scheme achieves the largest growth constant λ = λ c where we deﬁne λ c \t D( 1 / b ||ρ). In this deﬁnition, D(p ||q) is the binary information divergence function which is deﬁned for probabilities 0 < p, q < 1 as,\nD(p ||q) = p log p q\n− p 1 − q\nTheorem 1 (Expected Playback Delay). For the optimal time- invariant scheme, the expected playback delay E[P n ] satisﬁes\nλ c log n + O(log log n). \t (2) The achievability and converse parts of Theorem 1 are\nThe achievability part of Theorem 1 is an immediate corol- lary of the following lemma.\nLemma 1 (Performance of the coded repetition scheme). For the coded repetition scheme, the expected playback delay E[P n ] satisﬁes\nWe prove the achievability by using the following lemmas where we ﬁrst determine the distribution of inter-renewal time R for the coded repetition scheme and use it to analyze the behavior of playback delay of the coded repetition scheme.\nLemma 2 (Distribution of inter-renewal time). For an i.i.d. erasure channel with success probability ρ and bandwidth b packets/slot, the probability mass function (PMF) of inter- renewal time R for the coded repetition scheme is,\n− 1) n − 1\nProof: In each slot the decoder receives b equations with probability ρ and 0 with probability 1 − ρ. Let S n be the number of equations received until time n. Deﬁne the event G n−1 = {S j < j for 1 ≤ j ≤ n − 1}, which means that there is no renewal until slot n − 1. The Generalized Ballot theorem from [6] states that\nFor a renewal to occur at time n, b (k − 1) equations where k = n / b should be received in n − 1 slots and the channel should be good in the n th slot. Thus,\nSubstituting (6) and the PMF of binomial distribution for Pr (S n−1 = b(k − 1)), we get the result in (5).\nSince we are interested in the long term evolution of playback delay P n , it is useful to look at the behavior of the distribution Pr(R = n) for large n.\nLemma 3 (Asymptotic behavior of the PMF). For the coded repetition scheme, the tail distribution of inter-renewal time R decays exponentially with rate\nThe above result can also be stated as, Pr(R > n) . = e −nλ c where . = stands for asymptotic equality. This lemma can be proved by applying the Stirling\u2019s approximation to the PMF of R derived in Lemma 2. The full proof is omitted due to space limitations. We now use this result to prove Lemma 1.\nProof of Lemma 1: For the coded repetition scheme, P n = max(R 1 , R 2 , ..R J ) where J is the smallest interger such that J k=1 R k ≥ n, and R k \u2019s are i.i.d. with distribution of the inter-renewal time in Lemma 2. Thus,\nWe now evaluate upper and lower bounds (3) and (4) on E[P n ]. From Lemma 3 we know that the tail distribution\nwhere the function f 1 (m) is such that lim m→∞ f 1 (m) / m = 0. To get an upper bound we deﬁne a geometric random\nvariable G with decay rate λ c . We know that Pr(G > m) = e −mλ c ≥ Pr(R > m) for all m. Thus,\nwhere in (10) we use the result given in [7] that the expectation of the maximum of J geometric random variables with decay rate λ c is 1 / λ c · J i=1 1 / i , which is asymptotically equal to log J . By the strong law of renewal processes [8], we know that J grows linearly with n. Thus, the expectation over J of (10) replaces J by n and adds an O(1) term to give the upper bound (3).\nSimilarly, we derive the lower bound (4) by deﬁning another geometric random variable H with decay rate λ c + (n) and shifted g(n) units to the left of 0. The functions g(n) and (n) are chosen such that for all m,\nWe choose function g(n) = log log n. For large n, the right- hand side of (11) will become negative and we can choose\nFig. 3: Difference between the time-invariant scheme with a = [0 2] and its genie-assisted form. The two bottom rows show the packets played in every slot for the two schemes.\nBy the strong law of renewal processes and taking the expec- tation over J we get the lower bound (4).\nThe converse part of Theorem 1 is a corollary of the following lemma.\nLemma 4 (Performance of any time-invariant scheme). For any time-invariant scheme with pattern a as deﬁned in Deﬁ- nition 1, the expected playback delay E[P n ] satisﬁes\nλ a log n + O(log log n), \t (12) where λ a ≤ λ c for all a.\nTo simplify the analysis of playback delay, we deﬁne a genie-assisted version for every time-invariant scheme. In the genie-assisted scheme, a renewal occurs whenever the ﬁrst packet in that interval is decoded. Fig. 3 illustrates the difference between the time-invariant scheme with pattern a = [0 2] and its genie-assisted version.\nLet R a be inter-renewal time of the genie-assisted scheme with pattern a. Then, the playback delay after n slots P ∗ n = max(R a,1 , R a,2 ..R a,K ) where K is the smallest integer such that K i=1 R a,i ≥ n. Let λ a be the decay rate of its tail distribution as deﬁned in Lemma 3. We can prove the following result,\nLemma 5 (Asymptotic decay rate for time-invariant schemes). The decay rate λ a of the genie-assisted time-invariant scheme with pattern a is such that, λ a ≤ λ c for all a.\nFig. 4: The optimal ARQ-based scheme for streaming with instantaneous feedback\nwhere in (13), R is the inter-renewal time of the coded repetition scheme and its tail distribution is as derived in Lemma 3.\nProof of Lemma 4: Since the genie-assisted version gives a lower bound on the playback delay of the actual time- invariant scheme we have,\nwhere in K is the smallest integer such that K i=1 R a,i ≥ n. We then obtain (12) by using analysis similar to the proof of Lemma 1, but applied to renewals of the genie-assisted scheme.\nThus, we have shown that the coded repetition scheme gives largest growth constant λ among all time-invariant schemes. We have the following conjecture about time-varying schemes.\nConjecture 1. No scheme can achieve a larger value of growth constant λ than λ c for the coded repetition scheme.\nWe believe this is true because in absence of feedback, the statistics of undecoded packets are asymptotically stationary. Although the playback delay is not stationary, it is a function of the undecoded packets. Thus, using a time-varying scheme cannot improve the playback delay performance.\nNow consider that the source receives instantaneous feed- back about past erasures and thus can adapt its transmission strategy. For this model, we determine λ, the growth constant of playback delay, as a function of bandwidth b and channel success probability ρ.\nIt is clear that a simple ARQ-based scheme as shown in Figure 4 is optimal for streaming with instantaneous feedback. In every slot, the source transmits the b minimum-index packets that have not been decoded yet. If less than b packets remain to be sent, the source transmits all of them.\nThe dynamics of the source and receiver buffers can be modeled by considering an equivalent queueing system where, in every slot one packet enters the source queue. In every slot b packets depart from the queue with probability ρ and 0 with probability 1 − ρ. The departures from the source queue enter the playback queue at the receiver which plays one packet in every slot. There is an interruption in playback when the receiver queue becomes empty.\nWe prove the following theorem about E[P n ] with feedback. Theorem 2. For the streaming ARQ scheme with instanta- neous feedback, the expected playback delay satisﬁes (3) and (4) with growth constant λ = log( 1 / α ) where α is the real positive root of\nα b − 1 α − 1\nProof: Deﬁne a renewal as the instant when the source queue is empty, and R k as the k th inter-renewal time. Assume that the system resets to its initial state with both queues empty when a renewal takes place. Let I k be the number of packets remaining in the playback queue at the k th renewal instant. For the ﬁrst renewal, I 1 is equal to the number of interrupted slots in that interval. For the k th renewal interval, an interruption will occur only if I k is greater than I i for all 1 ≤ i < k. Thus, the playback delay P n of packet p n is\nwhere K is the smallest integer such that K k=1 R k ≥ n. The random variables I k are i.i.d. since each belongs to a different renewal interval. We now determine the asymptotic decay rate of Pr(I > t) as deﬁned by Lemma 3 and use it to ﬁnd E[P n ].\nWe can model the system by a random walk S n = X 1 + X 2 +..X n where X i \u2019s are i.i.d. binary random variables which are b − 1 with probability 1 − ρ and −1 with probability 1 − ρ. S n is the difference between the number of packets decoded at receiver and number of packets generated at source until time n. Since ρb > 1 this random walk has a positive drift. Consider two thresholds 0 and −t such that the random walk stops permanently when it crosses any one of them. A renewal corresponds to crossing threshold 0. The tail distribution Pr(I > t) = Pr ( n {S n < −t}), the probability that the random walk crosses −t before crossing 0. The Kingman bound [8] is an asymptotically tight bound on this probability for random walk S n = X 1 + X 2 + ..X n . It states that,\nwhere r is the negative root of γ(r), the semi-invariant moment generating function of X. For the binary random variable X deﬁned above,\nReplacing α = e r we get (15). Thus, the tail distribution Pr(I > t) decays with rate λ = log( 1 / α ). We ﬁnd the bounds (3) and (4) by taking an expectation of (16) and applying the strong law of renewal processes, as done in the proof of Lemma 1.\nIn this paper we analyzed the playback delay for streaming over an erasure channel with bandwidth b and erasure proba- bility 1 −ρ. We showed that the dominant term in the growth of\nFig. 5: Behavior of λ with bandwidth b packets/slot for the no-feedback and instantaneous feedback cases. The success probability ρ = 0.6, and logarithms are to the natural base.\nplayback delay with time index n is 1 / λ ·log n. We derived the largest value of λ as a function of b and ρ for the no-feedback and instantaneous feedback cases.\nFor streaming without feedback, the proposed coded rep- etition scheme achieves λ = D( 1 / b ||ρ). With instantaneous feedback, a simple ARQ based scheme achieves λ = log( 1 / α ) where α is the real positive root of (15). The behavior of λ with bandwidth b is illustrated in Fig. 5. As b approaches inﬁnity, both schemes converge to log( 1 / 1−ρ ). However the instantaneous feedback converges at a much faster rate. The achievable growth rate λ with delayed feedback will lie in the region between the two curves in Fig. 5.\nFinding the optimal scheme with delayed feedback is a part of ongoing work. Another research direction is to consider a broadcast streaming setup and investigate the trade-off between delay and the number of users served by the source.\nAlthough we assumed strict playback in this paper, the proposed coding scheme can be extended to allow packet dropping to reduce playback delay. Interested readers can refer to [9] for details."},"refs":[{"authors":[{"name":"M. Luby"},{"name":"M. Mitzenmacher"},{"name":"A. Shokrollahi"},{"name":"D. Spielman"},{"name":"V. Ste- mann"}],"title":{"text":"Practical loss-resilient codes"}},{"authors":[{"name":"E. Martinia"}],"title":{"text":"Dynamic Information and Constraints in Source and Channel Coding "}},{"authors":[{"name":"D. Lun"},{"name":"M. M´edard"},{"name":"R. Koetter"},{"name":"M. Effros"}],"title":{"text":"On coding for reliable communication over packet networks"}},{"authors":[{"name":"J. Sundararajan"},{"name":"D. Shah"},{"name":"M. M´edard"}],"title":{"text":"ARQ for Network Coding"}},{"authors":[{"name":"H. Yao"},{"name":"Y. Kochman"},{"name":"G. Wornell"}],"title":{"text":"A Multi-Burst Transmission Strategy for Streaming over Blockage Channels with Long Feedback Delay"}},{"authors":[{"name":"R. Durret"}],"title":{"text":"Probability: Theory and Examples"}},{"authors":[{"name":"B. Eisenberg"}],"title":{"text":"On the expectation of the maximum of iid geometric random variables"}},{"authors":[{"name":"R. Gallage"}],"title":{"text":"Discrete Stochastic Processes"}},{"authors":[{"name":"G. Joshi"}],"title":{"text":"On playback delay in streaming communication"}}]},"file":{"jsonClass":"File","file":"/home/arnfred/Code/trailhead/resources/isit2012/1569566779.pdf"},"links":[],"meta":{"jsonClass":"HashMap$HashTrieMap","sessionid":"S16.T4.5","endtime":"13:10","authors":"Gauri Joshi, Yuval Kochman, Gregory Wornell","date":"1341579000000","papertitle":"On Playback Delay in Streaming Communication","starttime":"12:50","session":"S16.T4: Delay and Deadline Constrained Communication","room":"Stratton 20 Chimneys (306)","paperid":"1569566779"},"cluster":{"jsonClass":"Map$EmptyMap$"}}
